/*!@license
* Infragistics.Web.ClientUI Scheduler 17.1.20171.1019
*
* Copyright (c) 2011-2017 Infragistics Inc.
*
* http://www.infragistics.com/
*
* Depends on:
* jquery-1.9.1.js
* jquery.ui.core.js
* jquery.ui.widget.js
* Intl.js
* infragistics.templating.js
* infragistics.util.js
* infragistics.util.jquery.js
* infragistics.ui.scroll.js
* infragistics.ext_core.js
* infragistics.ext_text.js
* infragistics.ext_collections.js
* infragistics.ext_io.js
* infragistics.ext_ui.js
* infragistics.ext_collectionsExtended.js
* infragistics.ext_threading.js
* infragistics.ext_web.js
* infragistics.xml.js
* infragistics.dv_core.js
* infragistics.dv_jquerydom.js
* infragistics.datasource.js
* infragistics.scheduler.core.js
* infragistics.ui.scheduler.core.js
* infragistics.ui.shared.js
* infragistics.ui.popover.js
* infragistics.ui.validator.js
* infragistics.ui.notifier.js
* infragistics.ui.editors.js
* infragistics.ui.combo.js
*
* Example to use:
*	<script type="text/javascript">
*	$(function () {
*		$("#scheduler").igScheduler({
*			height: "100%",
*			width: "100%",
*			views: ["month", "agenda"],
*			viewMode: "monthView",
*			selectedDate: new Date(2017, 3, 15),
*			dataSource: new $.ig.DataSource(data);
*		});
*	</script>
*	<input id="scheduler" />
*/
(function(factory){if(typeof define==="function"&&define.amd){define(["jquery","jquery-ui","./infragistics.util","./infragistics.util.jquery","./infragistics.datasource","./infragistics.ui.scroll","./infragistics.scheduler.core","./infragistics.ui.scheduler.core"],factory)}else{factory(jQuery)}})(function($){/*!@license
* Infragistics.Web.ClientUI Scheduler localization resources 17.1.20171.1019
*
* Copyright (c) 2011-2017 Infragistics Inc.
*
* http://www.infragistics.com/
*
*/
$.ig=$.ig||{};if(!$.ig.SchedulerLocale){$.ig.SchedulerLocale={locale:{tag:"en-US",agenda:"Agenda",month:"Month",next:"Next",previous:"Previous",dateRange:"Date Range",todayButton:"Today",nonDivError:"igScheduler can be instantiated only on HTML DIV element.",createNewAppointmentDialogTitle:"Create New Appointment",editAppointmentDialogTitle:"Edit Appointment",appointmentDialogSubjectLabel:"Subject",appointmentDialogLocationLabel:"Location",appointmentDialogFromLabel:"From",appointmentDialogToLabel:"To",appointmentDialogDescriptionLabel:"Description",appointmentDialogCreateButtonLabel:"Create",appointmentDialogSaveButtonLabel:"Save",appointmentDialogCancelButtonLabel:"Cancel",appointmentDialogCreateAppointmentButtonLabel:"Create appointment",dayPopoverTitle:"Create new appointment",appointmentPopoverTitle:"Edit appointment",appointmentPopoverOpenButtonLabel:"Open appointment",appointmentPopoverDeleteButtonLabel:"Delete",deleteAppointmentDialogTitle:"Delete Appointment",deleteAppointmentDialogConfirmation:"Do you want to delete this appointment?",deleteAppointmentDialogDeleteButtonLabel:"Delete",deleteAppointmentDialogCancelButtonLabel:"Cancel",appointmentDialogResourceLabel:"Resource",invalidIntervalErrorMessage:"The end date you entered occurs before the start date.",dialogCloseButtonText:"Close"}}}$.widget("ui.igScheduler",{options:{views:["monthView","agendaView"],viewMode:null,selectedDate:new Date,enableTodayButton:true,width:"100%",height:"100%",agendaViewSettings:{dateRangeInterval:7},monthViewSettings:{appointmentMode:"auto",isAgendaVisible:false,agendaVisibilityType:"allAppointments",viewSplitOrientation:"auto",isHorizontalSeparatorVisibile:true,isVerticalSeparatorVisibile:false,isWeekdayVisible:true,isWeekNumberVisible:false,isPreviousMonthShown:true,isNextMonthShown:true},appointmentDialogSuppress:false},css:{scheduler:"ui-igscheduler",container:"ui-widget ui-corner-all ui-state-default",header:"ui-igscheduler-header",body:"ui-igscheduler-body",todayButton:"ui-igscheduler-today-button",todayButtonIcon:"ui-icon ui-icon-calendar-day",navigator:"ui-igscheduler-navigator",dateRangeButton:"ui-igscheduler-navigator-date-range-button",disabledDateRangeButton:"ui-igscheduler-navigator-disabled-date-range-button",dateRangeButtonSpan:"date-range-button-text",previousButton:"ui-igscheduler-navigator-previous-button",nextButton:"ui-igscheduler-navigator-next-button",tabsContainer:"ui-igscheduler-tabs-container",tabs:"ui-igscheduler-tabs",monthTabIcon:"ui-icon ui-icon-calendar",agendaTabIcon:"ui-icon ui-icon-note",selectedTab:"ui-igscheduler-tabs-selected",sideBySideGroup:"ui-igscheduler-side-by-side-group",dayPopoverContent:"ui-igscheduler-day-popover-content",dayPopoverCreateButton:"ui-igscheduler-day-popover-create-button",appointmentPopoverContent:"ui-igscheduler-appointment-popover-content",appointmentPopoverSubject:"ui-igscheduler-appointment-popover-subject",appointmentPopoverFromTo:"ui-igscheduler-appointment-popover-from-to",appointmentPopoverActions:"ui-igscheduler-appointment-actions",appointmentPopoverDeleteButton:"ui-igscheduler-appointment-popover-delete-button",appointmentPopoverOpenButton:"ui-igscheduler-appointment-popover-open-button",appointmentDialogForm:"ui-igscheduler-appointment-dialog-form",appointmentDialogFormGroup:"ui-igscheduler-appointment-form-group",appointmentDialogSubject:"ui-igscheduler-appointment-dialog-subject",appointmentDialogLocation:"ui-igscheduler-appointment-dialog-location",appointmentDialogFromDate:"ui-igscheduler-appointment-dialog-from-date",appointmentDialogFromDateTimeLabel:"ui-igscheduler-appointment-dialog-from-date-time-label",appointmentDialogFromTime:"ui-igscheduler-appointment-dialog-from-time",appointmentDialogToDate:"ui-igscheduler-appointment-dialog-to-date",appointmentDialogToDateTimeLabel:"ui-igscheduler-appointment-dialog-to-date-time-label",appointmentDialogToTime:"ui-igscheduler-appointment-dialog-to-time",appointmentDialogDescription:"ui-igscheduler-appointment-dialog-description",appointmentDialogCreateButton:"ui-igscheudler-appointment-dialog-create-button",appointmentDialogSaveButton:"ui-igscheduler-appointment-dialog-save-button",appointmentDialogCancelButton:"ui-igscheduler-appointment-dialog-cancel-button",deleteAppointmentDialogConfirmation:"ui-igscheduler-delete-appointment-dialog-confirmation",deleteAppointmentDialogActions:"ui-igscheduler-delete-appointment-dialog-actions",deleteAppointmentDialogCancelButton:"ui-igscheduler-delete-appointment-dialog-cancel-button",deleteAppointmentDialogDeleteButton:"ui-igscheduler-delete-appointment-dialog-delete-button",resourcesCombo:"ui-igscheduler-resources-combo",resourcesComboItemColor:"ui-igscheduler-resources-combo-item-color",resourcesComboItemDisplayText:"ui-igscheduler-resources-combo-item-text"},events:{agendaRangeChanging:"agendaRangeChanging",agendaRangeChanged:"agendaRangeChanged",daySelected:"daySelected",monthChanging:"monthChanging",monthChanged:"monthChanged",rendering:"rendering",rendered:"rendered",viewChanging:"viewChanging",viewChanged:"viewChanged",appointmentDialogOpening:"appointmentDialogOpening",appointmentDialogOpened:"appointmentDialogOpened",appointmentDialogClosing:"appointmentDialogClosing",appointmentDialogClosed:"appointmentDialogClosed",appointmentCreating:"appointmentCreating",appointmentCreated:"appointmentCreated",appointmentDeleting:"appointmentDeleting",appointmentDeleted:"appointmentDeleted",appointmentEditing:"appointmentEditing",appointmentEdited:"appointmentEdited"},_createWidget:function(){this._options={resoucesById:{},resourcesComboItemTemplate:"<span class='"+this.css.resourcesComboItemColor+"'></span>"+"<span class='"+this.css.resourcesComboItemDisplayText+"'>${displayName}</span>",tabletBreakpoint:768,mobileBreakpoint:576,$header:undefined,$body:undefined,$scheduler:undefined,$todayButton:undefined,$navigator:undefined,$previousButton:undefined,$dateRangeButton:undefined,$nextButton:undefined,$calendar:undefined,$tabs:undefined,locale:$.ig.SchedulerLocale.locale.tag,monthFormat:$.ig.regional.defaults.dateTitleMonthPattern,agendaFormat:$.ig.regional.defaults.dateTitleFullPattern,timeFormat:$.ig.regional.defaults.timePattern,$dateRangeButtonTextContainer:undefined,$appointmentDialog:undefined,$appointmentDialogSubject:undefined,$appointmentDialogResourceCombo:undefined,$appointmentDialogLocation:undefined,$appointmentDialogFromDate:undefined,$appointmentDialogFromTime:undefined,$appointmentDialogToDate:undefined,$appointmentDialogToTime:undefined,$appointmentDialogDescription:undefined,$appointmentDialogCreateButton:undefined,$appointmentDialogSaveButton:undefined,$appointmentDialogCancelButton:undefined,$appointmentPopover:undefined,$appointmentPopoverContainer:undefined,$appointmentPopoverSubject:undefined,$appointmentPopoverFromTo:undefined,$appointmentPopoverDeleteButton:undefined,$appointmentPopoverOpenButton:undefined,$dayPopover:undefined,$dayPopoverContainer:undefined,$dayPopoverCreateButton:undefined,appointmentDialogDatePickersOptions:{dateInputFormat:"date",dateDisplayFormat:"date"},appointmentDialogTimePickersOptions:{buttonType:"spin",dateInputFormat:"time",dateDisplayFormat:"time"},appointmentDialogDefaultFromTimeHours:9,appointmentDialogDefaultToTimeHours:18,appointmentDialogSpinMinutesDelta:15,appointmentDialogWidth:"500px",appointmentDialogMobileWidth:"100%",appointmentDialogPosition:"center",appointmentDialogMobilePosition:"top",preventDayClickedEvent:false,currentAppointment:null,$deleteAppointmentDialog:undefined,$deleteAppointmentDialogCancelButton:undefined,$deleteAppointmentDialogDeleteButton:undefined};$.Widget.prototype._createWidget.apply(this,arguments)},_create:function(){this._saveInitialState();this._render();this._storeResourcesColorsById()},_render:function(){this._triggerRendering();this._renderContainer();this._renderHeader();this._renderBody();this._attachEventHandlers();this._triggerRendered()},_renderContainer:function(){if(!this.element.is("div")){throw new Error($.ig.SchedulerLocale.locale.nonDivError)}this.element.addClass(this.css.scheduler).addClass(this.css.container);if(this.options.width){this.element.css("width",this.options.width)}if(this.options.height){this.element.css("height",this.options.height)}},_renderHeader:function(){this._options.$header=$("<div></div>").addClass(this.css.header).appendTo(this.element);this._renderTodayButton();this._renderNavigator();this._renderTabs()},_renderBody:function(){var self=this;this._options.$body=$("<div></div>").addClass(this.css.body).appendTo(this.element);this._options.$scheduler=$("<div></div>").appendTo(this._options.$body).igSchedulerCore(this._setDefaults());this._options.$scheduler.one("igschedulercorelayoutupdated",function(){self._viewMode(self.options.viewMode);self._selectDate(self.options.selectedDate)})},_renderTodayButton:function(){if(this.options.enableTodayButton){this._options.$todayButton=$("<div></div>").addClass(this.css.todayButton).appendTo(this._options.$header);this._options.$todayButton.append($("<span></span>").addClass(this.css.todayButtonIcon));this._options.$todayButton.append("<span>"+$.ig.SchedulerLocale.locale.todayButton+"</span>")}},_renderNavigator:function(){this._options.$navigator=$("<div></div>").addClass(this.css.navigator).appendTo(this._options.$header);this._options.$previousButton=$("<div><span></span></div>").addClass(this.css.previousButton).attr("title",$.ig.SchedulerLocale.locale.previous).appendTo(this._options.$navigator);this._options.$dateRangeButton=$("<div></div>").addClass(this.css.dateRangeButton).attr("title",$.ig.SchedulerLocale.locale.dateRange).appendTo(this._options.$navigator);this._renderCalendar();this._options.$dateRangeButtonTextContainer=$("<span></span>").addClass(this.css.dateRangeButtonSpan).appendTo(this._options.$dateRangeButton);this._options.$nextButton=$("<div><span></span></div>").addClass(this.css.nextButton).attr("title",$.ig.SchedulerLocale.locale.next).appendTo(this._options.$navigator)},_renderCalendar:function(){var pickerOptions,self=this;pickerOptions={onSelect:function(){var date=$(this).datepicker("getDate");self._selectDate(date);self._triggerDaySelected()}};$.datepicker.setDefaults($.datepicker.regional[this._options.dateShortLocale]);this._options.$calendar=$("<input />").appendTo(this._options.$dateRangeButton).datepicker(pickerOptions);this._options.$calendar.datepicker("setDate",new Date)},_renderTabs:function(){var self=this;this._options.$tabs=$("<div></div>").addClass(this.css.tabsContainer).appendTo(this._options.$header);$.each(this.options.views,function(index,value){self._renderTab(value.replace("View",""))})},_renderTab:function(value){var self=this;this._options["$"+value+"ViewButton"]=$("<div></div>").addClass(self.css.tabs).appendTo(this._options.$tabs).append($("<span></span>").addClass(self.css[value+"TabIcon"])).append("<span>"+$.ig.SchedulerLocale.locale[value]+"</span>")},_setDefaults:function(){var selDate=this.options.selectedDate,interval=this.options.agendaViewSettings.dateRangeInterval,settings=this.options.monthViewSettings,orientation=this._getSplitOrientation(),coreOptions;this.options.viewMode=this.options.viewMode!==null?this.options.viewMode:this.options.views[0]||"monthView";coreOptions=$.extend(true,{},this.options);coreOptions.width="100%";coreOptions.height="100%";coreOptions.monthViewScrollMode="paged";coreOptions.monthViewNameVisibility="collapsed";coreOptions.cultureName=this._options.locale;coreOptions.agendaViewMinimumDate=selDate;coreOptions.agendaViewMaximumDate=new $.ig.Date.prototype.addDays(selDate,interval);coreOptions.monthViewAgendaVisibility=settings.isAgendaVisible?"visible":"collapsed";coreOptions.agendaViewAppointmentScope=settings.agendaVisibilityType;coreOptions.viewSplitOrientation=orientation;coreOptions.monthViewDayContentDisplayMode=orientation==="vertical"?"activitySubject":"squareIndicator";coreOptions.monthViewHorizontalSeparatorVisibility=settings.isHorizontalSeparatorVisibile?"visible":"collapsed";coreOptions.monthViewVerticalSeparatorVisibility=settings.isVerticalSeparatorVisibile?"visible":"collapsed";coreOptions.monthViewDayOfWeekHeaderVisibility=settings.isWeekdayVisible?"visible":"collapsed";coreOptions.monthViewWeekNumberVisibility=settings.isWeekNumberVisible?"visible":"collapsed";coreOptions.monthViewLeadingDayVisibility=settings.isPreviousMonthShown?"visible":"collapsed";coreOptions.monthViewTrailingDayVisibility=settings.isNextMonthShown?"visible":"collapsed";return coreOptions},_dateRangeButtonText:function(date){var viewMode=this.options.viewMode,pattern;if(viewMode==="monthView"){pattern=this._options.monthFormat}else if(viewMode==="agendaView"){pattern=this._options.agendaFormat}$(".date-range-button-text").text($.datepicker.formatDate(pattern,date))},_tabSwitcher:function(mode,event){var currentSelectedView=this.options.viewMode,noCancel=this._triggerViewChanging(event,mode,currentSelectedView);if(noCancel){switch(mode){case"monthView":this._viewMode("monthView");break;case"agendaView":this._viewMode("agendaView");break}this._triggerViewChanged(event,mode)}},_viewMode:function(mode){switch(mode){case"monthView":this._options.$scheduler.igSchedulerCore("option","viewMode","monthView");this.options.viewMode="monthView";this._options.$calendar.datepicker("option","dateFormat",this._options.monthFormat);var minDate=this._options.$scheduler.igSchedulerCore("option","agendaViewMinimumDate");this._selectDate(minDate);this._options.$calendar.datepicker("hide");this._options.$dateRangeButton.removeClass(this.css.dateRangeButton);this._options.$dateRangeButton.addClass(this.css.disabledDateRangeButton);if(this._options.$monthViewButton){this._options.$monthViewButton.addClass(this.css.selectedTab)}if(this._options.$agendaViewButton){this._options.$agendaViewButton.removeClass(this.css.selectedTab)}break;case"agendaView":this._options.$scheduler.igSchedulerCore("option","viewMode","agendaView");this.options.viewMode="agendaView";this._options.$calendar.datepicker("option","dateFormat",this._options.agendaFormat);this._selectDate(this._options.$scheduler.igSchedulerCore("option","selectedDate"));this._options.$dateRangeButton.removeClass(this.css.disabledDateRangeButton);this._options.$dateRangeButton.addClass(this.css.dateRangeButton);if(this._options.$agendaViewButton){this._options.$agendaViewButton.addClass(this.css.selectedTab)}if(this._options.$monthViewButton){this._options.$monthViewButton.removeClass(this.css.selectedTab)}break}},_changeTimePeriod:function(event,delta){var newDate,startAgendaRangeDate,agendaRange,noCancel;if(this._options.$scheduler.igSchedulerCore("option","viewMode")==="monthView"){newDate=new Date(this._options.$scheduler.igSchedulerCore("option","selectedDate"));newDate.setMonth(newDate.getMonth()+delta);noCancel=this._triggerMonthChanging(event,newDate);if(noCancel){this._selectDate(newDate);this._triggerMonthChanged(event)}}else{agendaRange=this.options.agendaViewSettings.dateRangeInterval;startAgendaRangeDate=this._options.$scheduler.igSchedulerCore("option","agendaViewMinimumDate");startAgendaRangeDate=new Date(startAgendaRangeDate.getFullYear(),startAgendaRangeDate.getMonth(),startAgendaRangeDate.getDate()+delta*agendaRange);noCancel=this._triggerAgendaRangeChanging(event,startAgendaRangeDate);if(noCancel){this._selectDate(startAgendaRangeDate);this._triggerAgendaRangeChanged(event)}}},_selectDate:function(date){var monthDate=this._options.$scheduler.igSchedulerCore("option","selectedDate");if(this.options.selectedDate!==date){this.options.selectedDate=date}this._dateRangeButtonText(date);if(this._options.$calendar.datepicker("getDate")!==date){this._options.$calendar.datepicker("setDate",date)}if(monthDate.getTime()!==date.getTime()){this._options.$scheduler.igSchedulerCore("option","selectedDate",date)}this._options.$scheduler.igSchedulerCore("ensureMonthVisibleInMonthView",date);this._options.$scheduler.igSchedulerCore("ensureDayVisibleInMonthView",date);this._setOption("agendaViewMinimumDate",date);this._setOption("agendaViewMaximumDate",new $.ig.Date.prototype.addDays(date,this.options.agendaViewSettings.dateRangeInterval))},_attachEventHandlers:function(){this._attachHeaderEventHandlers();this._attachSchedulerEventHandlers();this._attachDocumentEventHandlers()},_attachHeaderEventHandlers:function(){var self=this;this._options.$todayButton.on("click",function(){self._selectDate(new Date)});this._options.$previousButton.on("click",function(event){self._changeTimePeriod(event,-1)});this._options.$dateRangeButton.on("click",function(){var view=self._options.$scheduler.igSchedulerCore("option","viewMode");if(view==="monthView"){return}else{self._options.$calendar.datepicker("show")}});this._options.$nextButton.on("click",function(event){self._changeTimePeriod(event,1)});if(this._options.$monthViewButton){this._options.$monthViewButton.on("click",function(event){self._tabSwitcher("monthView",event)})}if(this._options.$agendaViewButton){this._options.$agendaViewButton.on("click",function(event){self._tabSwitcher("agendaView",event)})}},_detachHeaderEventHandlers:function(){this._options.$todayButton.off();this._options.$previousButton.off();this._options.$dateRangeButton.off();this._options.$nextButton.off();if(this._options.$monthViewButton){this._options.$monthViewButton.off()}if(this._options.$agendaViewButton){this._options.$agendaViewButton.off()}},_attachSchedulerEventHandlers:function(){this._options.$scheduler.on("igschedulercoredayclicked",$.proxy(this._onDayClicked,this));this._options.$scheduler.on("igschedulercoreappointmentselected",$.proxy(this._onAppointmentSelected,this));this._options.$scheduler.on("igschedulercoreappointmentclicked",$.proxy(this._onAppointmentClicked,this))},_detachSchedulerEventHandlers:function(){this._options.$scheduler.off("igschedulercoredayclicked",$.proxy(this._onDayClicked,this));this._options.$scheduler.off("igschedulercoreappointmentselected",$.proxy(this._onAppointmentSelected,this));this._options.$scheduler.off("igschedulercoreappointmentclicked",$.proxy(this._onAppointmentClicked,this))},_attachDocumentEventHandlers:function(){$(document).on("click",$.proxy(this._onDocumentClicked,this));$(window).on("resize",$.proxy(this._onWindowResize,this))},_detachDocumentEventHandlers:function(){$(document).off("click",$.proxy(this._onDocumentClicked,this));$(window).off("resize",$.proxy(this._onWindowResize,this))},_onDayClicked:function(event,args){this._selectDate(args.clickedDate);if(this.options.appointmentDialogSuppress){return}if(this._options.preventDayClickedEvent){this._options.preventDayClickedEvent=false;return}if(this._options.$dayPopover===undefined){this._renderDayPopover()}if(args.clickedDate.getMonth()!==this.options.selectedDate.getMonth()){this._options.$dayPopover.igPopover("hide");return}if(this._options.$appointmentPopover&&this._options.$appointmentPopoverContainer.css("display")!=="none"){this._options.$appointmentPopover.igPopover("hide")}setTimeout(function(self,clickedDate){var selectedDayElement=self._options.$scheduler.igSchedulerCore("getElementForDay",clickedDate);self._options.$dayPopover.igPopover("show",$(selectedDayElement))},100,this,args.clickedDate)},_onAppointmentClicked:function(event,args){if(this.options.appointmentDialogSuppress){return}if(args.viewMode===$.ig.scheduler.SchedulerViewMode.monthView){var element,fromTo;this._options.preventDayClickedEvent=true;if(this._options.$appointmentPopover===undefined){this._renderAppointmentPopover()}if(this._options.$appointmentPopoverContainer.css("display")!=="none"){this._options.$appointmentPopover.igPopover("hide")}this._options.currentAppointment=args.appointment;this._options.$appointmentPopoverSubject.text(args.appointment.subject());fromTo=this._formatDateToAMPM(args.appointment.start())+" - "+this._formatDateToAMPM(args.appointment.end());this._options.$appointmentPopoverFromTo.text(fromTo);element=this._options.$scheduler.igSchedulerCore("getElementForActivity",args.appointment,args.viewMode,args.clickedInDate);setTimeout(function(self){self._options.$appointmentPopover.igPopover("show",$(element))},0,this)}},_onAppointmentSelected:function(event,args){var newSelectedDay=args.selectedAppointment.start();this.options.selectedDate=newSelectedDay;this._dateRangeButtonText(newSelectedDay);this._options.$calendar.datepicker("setDate",newSelectedDay)},_openAppointmentDialogForCreating:function(){var noCancel;if(this._options.$appointmentDialog===undefined){this._renderAppointmentDialog()}noCancel=this._triggerAppointmentDialogOpening(true);if(noCancel){this._options.currentAppointment=undefined;this._clearAppointmentDialogData();this._options.$appointmentDialog.dialog("option","title",$.ig.SchedulerLocale.locale.createNewAppointmentDialogTitle);this._updateAppointmentDialogTitleColor("");this._options.$appointmentDialogSaveButton.hide();this._options.$appointmentDialogCreateButton.show();this._options.$appointmentDialog.dialog("open");this._triggerAppointmentDialogOpened(true)}},_openAppointmentDialogForEditing:function(){var appointment,fromDate,toDate,noCancel,resourceColor=null;if(this._options.$appointmentDialog===undefined){this._renderAppointmentDialog()}noCancel=this._triggerAppointmentDialogOpening(false);if(noCancel){appointment=this._options.currentAppointment;this._clearAppointmentDialogData();this._options.$appointmentDialogSubject.igTextEditor("value",appointment.subject());this._options.$appointmentDialogLocation.igTextEditor("value",appointment.location());if(appointment.resourceId()!==null){this._options.$appointmentDialogResourceCombo.igCombo("value",appointment.resourceId());resourceColor=this._getResourceColorById(appointment.resourceId())}fromDate=appointment.start();toDate=appointment.end();this._setAppointmentDialogFromToDates(fromDate,toDate);this._options.$appointmentDialogDescription.igTextEditor("value",appointment.description());this._options.$appointmentDialog.dialog("option","title",$.ig.SchedulerLocale.locale.editAppointmentDialogTitle);this._updateAppointmentDialogTitleColor(resourceColor);this._options.$appointmentDialogSaveButton.show();this._options.$appointmentDialogCreateButton.hide();this._options.$appointmentDialog.dialog("open");this._triggerAppointmentDialogOpened(false)}},_onWindowResize:function(){this._setResponsibleUI()},_setResponsibleUI:function(){var currentOrientation,newOrientation;currentOrientation=this._options.$scheduler.igSchedulerCore("option","viewSplitOrientation");newOrientation=this._getSplitOrientation();if(currentOrientation!==newOrientation){this._options.$scheduler.igSchedulerCore("option","viewSplitOrientation",newOrientation);this._options.$scheduler.igSchedulerCore("option","monthViewDayContentDisplayMode",newOrientation==="vertical"?"activitySubject":"squareIndicator")}if(this._options.$appointmentDialog){this._options.$appointmentDialog.dialog("option","position",this._getDialogPosition());this._options.$appointmentDialog.dialog("option","width",this._getDialogWidth())}if(this._options.$deleteAppointmentDialog){this._options.$deleteAppointmentDialog.dialog("option","position",this._getDialogPosition());this._options.$deleteAppointmentDialog.dialog("option","width",this._getDialogWidth())}},_getSplitOrientation:function(){var orientation=this.options.monthViewSettings.viewSplitOrientation,containerWidth=this.element.outerWidth();if(orientation==="auto"){if(containerWidth<this._options.tabletBreakpoint){orientation="horizontal"}else{orientation="vertical"}}return orientation},_getDialogPosition:function(){var containerWidth=this.element.outerWidth(),position;if(containerWidth<this._options.mobileBreakpoint){position=this._options.appointmentDialogMobilePosition}else{position=this._options.appointmentDialogPosition}return{my:position,at:position,of:this.element}},_getDialogWidth:function(){return this.element.outerWidth()<this._options.mobileBreakpoint?this._options.appointmentDialogMobileWidth:this._options.appointmentDialogWidth},_clearAppointmentDialogData:function(){this._options.$appointmentDialogSubject.igTextEditor("value","");this._options.$appointmentDialogLocation.igTextEditor("value","");this._setAppointmentDialogDefaultDateTime();this._options.$appointmentDialogDescription.igTextEditor("value","")},_setAppointmentDialogDefaultDateTime:function(){var selectedDate=this.options.selectedDate,selectedDateYear=selectedDate.getFullYear(),selectedDateMonth=selectedDate.getMonth(),selectedDateDay=selectedDate.getDate(),fromDate=new Date(selectedDateYear,selectedDateMonth,selectedDateDay,this._options.appointmentDialogDefaultFromTimeHours),toDate=new Date(selectedDateYear,selectedDateMonth,selectedDateDay,this._options.appointmentDialogDefaultToTimeHours);this._setAppointmentDialogFromToDates(fromDate,toDate)},_setAppointmentDialogFromToDates:function(fromDate,toDate){this._setDateValue(this._options.$appointmentDialogFromDate,this._options.$appointmentDialogFromTime,fromDate);this._setDateValue(this._options.$appointmentDialogToDate,this._options.$appointmentDialogToTime,toDate)},_setDateValue:function(picker,editor,value){if(picker){picker.igDatePicker("option","value",value)}if(editor){editor.igDateEditor("option","value",value)}},_renderAppointmentDialog:function(){var self=this,$appointmentDialogForm=$("<form></form>").addClass(this.css.appointmentDialogForm),$subjectLocationContainer=$("<div></div>").addClass(this.css.sideBySideGroup);this._options.$appointmentDialog=$appointmentDialogForm.appendTo(this.element).dialog({autoOpen:false,modal:true,width:this._getDialogWidth(),position:this._getDialogPosition(),resizable:false,closeText:$.ig.SchedulerLocale.locale.dialogCloseButtonText,create:function(){$appointmentDialogForm.append($subjectLocationContainer);self._renderAppointmentDialogSubject($subjectLocationContainer);self._renderAppointmentDialogLocation($subjectLocationContainer);self._renderAppointmentDialogFromDateTime($appointmentDialogForm);self._renderAppointmentDialogToDateTime($appointmentDialogForm);self._renderAppointmentDialogResource($appointmentDialogForm);self._renderAppointmentDialogDescription($appointmentDialogForm);self._renderAppointmentDialogActions($appointmentDialogForm);self._initializeAppointmentDialogFieldsValidator($appointmentDialogForm)},beforeClose:function(){var isAppointmentNew=self._options.currentAppointment?false:true,noCancel=self._triggerAppointmentDialogClosing(isAppointmentNew);if(noCancel){self._options.$appointmentDialog.igValidator("hide");self._options.$appointmentDialogResourceCombo.igCombo("deselectAll")}else{return false}},close:function(){var isAppointmentNew=self._options.currentAppointment?false:true;self._triggerAppointmentDialogClosed(isAppointmentNew)},dragStart:function(event){if(self.element.outerWidth()<self._options.mobileBreakpoint){event.preventDefault()}}})},_renderAppointmentDialogSubject:function(container){var $subjectContainer=$("<div></div").addClass(this.css.appointmentDialogFormGroup),$subjectLabel=$("<label></label>").text($.ig.SchedulerLocale.locale.appointmentDialogSubjectLabel);this._options.$appointmentDialogSubject=$("<input type='text' />").addClass(this.css.appointmentDialogSubject);container.append($subjectContainer.append($subjectLabel).append(this._options.$appointmentDialogSubject));this._options.$appointmentDialogSubject.igTextEditor({placeHolder:$.ig.SchedulerLocale.locale.appointmentDialogSubjectLabel})},_renderAppointmentDialogLocation:function(container){var $locationContainer=$("<div></div>").addClass(this.css.appointmentDialogFormGroup),$locationLabel=$("<label></label>").text($.ig.SchedulerLocale.locale.appointmentDialogLocationLabel);this._options.$appointmentDialogLocation=$("<input type='text' />").addClass(this.css.appointmentDialogLocation);container.append($locationContainer.append($locationLabel).append(this._options.$appointmentDialogLocation));this._options.$appointmentDialogLocation.igTextEditor({placeHolder:$.ig.SchedulerLocale.locale.appointmentDialogLocationLabel})},_renderAppointmentDialogFromDateTime:function(container){var self=this,$fromContainer=$("<div></div>").addClass(this.css.sideBySideGroup),$fromLabel=$("<label></label>").addClass(this.css.appointmentDialogFromDateTimeLabel).text($.ig.SchedulerLocale.locale.appointmentDialogFromLabel),$fromDateContainer=$("<div></div>").addClass(this.css.appointmentDialogFormGroup),$fromTimeContainer=$("<div></div>").addClass(this.css.appointmentDialogFormGroup),fromDateOptions,fromTimeOptions;this._options.$appointmentDialogFromDate=$("<input type='date' />").addClass(this.css.appointmentDialogFromDate);this._options.$appointmentDialogFromTime=$("<input type='date' />").addClass(this.css.appointmentDialogFromTime);$fromDateContainer.append(this._options.$appointmentDialogFromDate);$fromTimeContainer.append(this._options.$appointmentDialogFromTime);container.append($fromLabel).append($fromContainer.append($fromDateContainer).append($fromTimeContainer));fromDateOptions=$.extend({},{valueChanged:function(){self._triggerValidationForToDate()}},this._options.appointmentDialogDatePickersOptions);fromTimeOptions=$.extend({},{valueChanged:function(){self._triggerValidationForToDate()},rendered:function(evt,ui){self._overwriteSpinHandlers(ui.owner)}},this._options.appointmentDialogTimePickersOptions);this._options.$appointmentDialogFromDate.igDatePicker(fromDateOptions);this._options.$appointmentDialogFromTime.igDateEditor(fromTimeOptions)},_triggerValidationForToDate:function(){this._options.$appointmentDialog.igValidator("validate",3)},_renderAppointmentDialogToDateTime:function(container){var self=this,$toContainer=$("<div></div>").addClass(this.css.sideBySideGroup),$toLabel=$("<label></label>").addClass(this.css.appointmentDialogToDateTimeLabel).text($.ig.SchedulerLocale.locale.appointmentDialogToLabel),$toDateContainer=$("<div></div>").addClass(this.css.appointmentDialogFormGroup),$toTimeContainer=$("<div></div>").addClass(this.css.appointmentDialogFormGroup),toTimeOptions;this._options.$appointmentDialogToDate=$("<input type='text' />").addClass(this.css.appointmentDialogToDate);this._options.$appointmentDialogToTime=$("<input type='date' />").addClass(this.css.appointmentDialogToTime);$toDateContainer.append(this._options.$appointmentDialogToDate);$toTimeContainer.append(this._options.$appointmentDialogToTime);container.append($toLabel).append($toContainer.append($toDateContainer).append($toTimeContainer));toTimeOptions=$.extend({},{valueChanged:function(){self._triggerValidationForToDate()},rendered:function(evt,ui){self._overwriteSpinHandlers(ui.owner)}},this._options.appointmentDialogTimePickersOptions);this._options.$appointmentDialogToDate.igDatePicker(this._options.appointmentDialogDatePickersOptions);this._options.$appointmentDialogToTime.igDateEditor(toTimeOptions)},_overwriteSpinHandlers:function(editor){var self=this,spinMinutesDelta=this._options.appointmentDialogSpinMinutesDelta,oldSpinEditMode,oldSpinDisplayMode;oldSpinEditMode=editor._spinEditMode;editor._spinEditMode=function(delta,userInteraction){oldSpinEditMode.apply(editor,[delta*self._getDelta(editor,spinMinutesDelta,delta),userInteraction])};oldSpinDisplayMode=editor._spinDisplayMode;editor._spinDisplayMode=function(delta,userInteraction){oldSpinDisplayMode.apply(editor,[delta*spinMinutesDelta,userInteraction])}},_getDelta:function(editor,delta){return editor._getTimePosition().name==="minutes"?delta:1},_renderAppointmentDialogResource:function(container){var $ownerContainer=$("<div></div>").addClass(this.css.appointmentDialogFormGroup),$ownerLabel=$("<label></label>").text($.ig.SchedulerLocale.locale.appointmentDialogResourceLabel),comboOptions;this._options.$appointmentDialogResourceCombo=$("<div></div>").addClass(this.css.resourcesCombo);comboOptions={selectionChanged:$.proxy(this._appointmentDialogResourceComboSelectionChanged,this),itemsRendered:$.proxy(this._onAppointmentDialogResourcesComboItemsRendered,this),textKey:"displayName",valueKey:"id",itemTemplate:this._options.resourcesComboItemTemplate,dataSource:this.options.dataSource.resourceItemsSource()};
this._options.$appointmentDialogResourceCombo.igCombo(comboOptions);container.append($ownerContainer.append($ownerLabel).append(this._options.$appointmentDialogResourceCombo))},_appointmentDialogResourceComboSelectionChanged:function(evt,ui){var $colorContainer,color=null;if(ui.items.length>0){$colorContainer=$(ui.items[0].element).find("."+this.css.resourcesComboItemColor);color=$colorContainer.css("background-color")}this._updateAppointmentDialogTitleColor(color)},_renderAppointmentDialogDescription:function(container){var $descriptionContainer=$("<div></div>").addClass(this.css.appointmentDialogFormGroup),$descirptionLabel=$("<label></label>").text($.ig.SchedulerLocale.locale.appointmentDialogDescriptionLabel);this._options.$appointmentDialogDescription=$("<textarea></textarea>").addClass(this.css.appointmentDialogDescription);container.append($descriptionContainer.append($descirptionLabel).append(this._options.$appointmentDialogDescription));this._options.$appointmentDialogDescription.igTextEditor({textMode:"multiline",height:100})},_renderAppointmentDialogActions:function(container){var $actionsContainer=$("<div></div>").addClass(this.css.appointmentDialogFormGroup);this._options.$appointmentDialogCreateButton=$("<input type='submit' />").addClass(this.css.appointmentDialogCreateButton).appendTo($actionsContainer).igButton({labelText:$.ig.SchedulerLocale.locale.appointmentDialogCreateButtonLabel}).on("igbuttonclick",$.proxy(this._onCreateAppointmentClicked,this));this._options.$appointmentDialogSaveButton=$("<input type='submit' />").addClass(this.css.appointmentDialogSaveButton).appendTo($actionsContainer).igButton({labelText:$.ig.SchedulerLocale.locale.appointmentDialogSaveButtonLabel}).on("igbuttonclick",$.proxy(this._onEditAppointmentClicked,this));this._options.$appointmentDialogCancelButton=$("<input type='button' />").addClass(this.css.appointmentDialogCancelButton).appendTo($actionsContainer).igButton({labelText:$.ig.SchedulerLocale.locale.appointmentDialogCancelButtonLabel}).on("igbuttonclick",$.proxy(this._onCancelAppointmentClicked,this));container.append($actionsContainer)},_renderDayPopover:function(){var $dayPopoverContent=$("<div></div>").addClass(this.css.dayPopoverContent);this._options.$dayPopoverCreateButton=$("<input type='button' />").addClass(this.css.dayPopoverCreateButton).appendTo($dayPopoverContent).igButton({labelText:$.ig.SchedulerLocale.locale.appointmentDialogCreateAppointmentButtonLabel}).on("igbuttonclick",$.proxy(this._onDayPopoverCreateButtonClicked,this));this._options.$dayPopover=$("<div></div>").appendTo(this.element).igPopover({animationDuration:50,contentTemplate:$dayPopoverContent,headerTemplate:{closeButton:true,title:$.ig.SchedulerLocale.locale.dayPopoverTitle}});this._options.$dayPopoverContainer=$dayPopoverContent.closest(".ui-igpopover")},_renderAppointmentPopover:function(){var $appointmentPopoverContent=$("<div></div>").addClass(this.css.appointmentPopoverContent),$appointmentPopoverActions=$("<div></div>").addClass(this.css.appointmentPopoverDeleteButton);this._options.$appointmentPopoverSubject=$("<div></div>").addClass(this.css.appointmentPopoverSubject).appendTo($appointmentPopoverContent);this._options.$appointmentPopoverFromTo=$("<div></div>").addClass(this.css.appointmentPopoverFromTo).appendTo($appointmentPopoverContent);this._options.$appointmentPopoverDeleteButton=$("<input type='button' />").addClass(this.css.appointmentPopoverDeleteButton).appendTo($appointmentPopoverActions).igButton({labelText:$.ig.SchedulerLocale.locale.appointmentPopoverDeleteButtonLabel}).on("click",$.proxy(this._onDeleteAppointmentClicked,this));this._options.$appointmentPopoverOpenButton=$("<input type='button' />").addClass(this.css.appointmentPopoverOpenButton).appendTo($appointmentPopoverActions).igButton({labelText:$.ig.SchedulerLocale.locale.appointmentPopoverOpenButtonLabel}).on("click",$.proxy(this._onOpenAppointmentClicked,this));$appointmentPopoverContent.append($appointmentPopoverActions);this._options.$appointmentPopover=$("<div></div>").appendTo(this.element).igPopover({animationDuration:50,contentTemplate:$appointmentPopoverContent,headerTemplate:{closeButton:true,title:$.ig.SchedulerLocale.locale.appointmentPopoverTitle}});this._options.$appointmentPopoverContainer=$appointmentPopoverContent.closest(".ui-igpopover")},_renderDeleteAppointmentDialog:function(){var $dialogContainer=$("<div></div>"),$dialogConfirmation=$("<div></div>").addClass(this.css.deleteAppointmentDialogConfirmation).text($.ig.SchedulerLocale.locale.deleteAppointmentDialogConfirmation),$dialogActions=$("<div></div>").addClass(this.css.deleteAppointmentDialogActions);$dialogConfirmation.appendTo($dialogContainer);this._options.$deleteAppointmentDialogCancelButton=$("<input type='button' />").addClass(this.css.deleteAppointmentDialogCancelButton).appendTo($dialogActions).igButton({labelText:$.ig.SchedulerLocale.locale.deleteAppointmentDialogCancelButtonLabel}).on("igbuttonclick",$.proxy(this._onCancelDeletingAppointmentClicked,this));this._options.$deleteAppointmentDialogDeleteButton=$("<input type='button' />").addClass(this.css.deleteAppointmentDialogDeleteButton).appendTo($dialogActions).igButton({labelText:$.ig.SchedulerLocale.locale.deleteAppointmentDialogDeleteButtonLabel}).on("igbuttonclick",$.proxy(this._onConfirmDeletingAppointmentClicked,this));$dialogContainer.append($dialogActions);this._options.$deleteAppointmentDialog=$dialogContainer.appendTo(this.element).dialog({autoOpen:false,title:$.ig.SchedulerLocale.locale.deleteAppointmentDialogTitle,modal:true,width:this._getDialogWidth(),position:this._getDialogPosition(),resizable:false,closeText:$.ig.SchedulerLocale.locale.dialogCloseButtonText})},_initializeAppointmentDialogFieldsValidator:function(container){var self=this;container.igValidator({onchange:true,onblur:false,fields:[{selector:this._options.$appointmentDialogSubject,required:true},{selector:this._options.$appointmentDialogFromDate,required:true},{selector:this._options.$appointmentDialogFromTime,required:true},{selector:this._options.$appointmentDialogToDate,required:true,custom:{method:function(value){var isTimeSpanValid=self._isTimeSpanValid(value),$editorContainer=self._options.$appointmentDialogToTime.igDateEditor("editorContainer");if(isTimeSpanValid){$editorContainer.removeClass($.ui.igNotifier.prototype.css.errorState)}else{$editorContainer.addClass($.ui.igNotifier.prototype.css.errorState)}return isTimeSpanValid},errorMessage:$.ig.SchedulerLocale.locale.invalidIntervalErrorMessage}},{selector:this._options.$appointmentDialogToTime,required:true}]})},_isTimeSpanValid:function(toValue){var from=this._getFromValue(),to=this._getToValue(toValue),isFromBeforeTo=true;if(from!==null&&to!==null){isFromBeforeTo=to.getTime()>from.getTime()}return isFromBeforeTo},_getFromValue:function(){return this._getMergedDateAndTime(this._options.$appointmentDialogFromDate.igDatePicker("value"),this._options.$appointmentDialogFromTime.igDateEditor("value"))},_getToValue:function(toValue){return this._getMergedDateAndTime(toValue,this._options.$appointmentDialogToTime.igDateEditor("value"))},_getMergedDateAndTime:function(date,time){if(!date||!time){return null}var dateTime=new Date(date.getFullYear(),date.getMonth(),date.getDate(),time.getHours(),time.getMinutes(),time.getSeconds(),time.getMilliseconds());return dateTime},_onConfirmDeletingAppointmentClicked:function(){var appointmentId=this._options.currentAppointment.id(),noCancel=this._triggerAppointmentDeleting(this._options.currentAppointment.dataObject());if(noCancel){this.deleteAppointment(this._options.currentAppointment);this._triggerAppointmentDeleted(appointmentId);this._options.currentAppointment=null;this._options.$deleteAppointmentDialog.dialog("close")}},_onCancelDeletingAppointmentClicked:function(){this._options.currentAppointment=null;this._options.$deleteAppointmentDialog.dialog("close")},_onAppointmentDialogResourcesComboItemsRendered:function(event,ui){var resources=ui.dataSource.data(),$appointmentDialogResourceCombo=this._options.$appointmentDialogResourceCombo,resource,comboItem,colorContainer,color;for(var i=0;i<resources.length;i++){resource=resources[i];comboItem=$appointmentDialogResourceCombo.igCombo("itemsFromValue",resource.id);colorContainer=comboItem.element.find("."+this.css.resourcesComboItemColor);color=this._getResourceColorById(resource.id);colorContainer.css("background-color",color)}},_updateDeleteAppointmenDialogTitleColor:function(color){this._updateDialogTitleColor(this._options.$deleteAppointmentDialog,color)},_updateAppointmentDialogTitleColor:function(color){this._updateDialogTitleColor(this._options.$appointmentDialog,color)},_updateDialogTitleColor:function(dialogElement,color){var titlebar=dialogElement.dialog("widget").find(".ui-dialog-titlebar");if(color){titlebar.css("background-color",color)}else{titlebar.css("background-color","")}},_onDocumentClicked:function(event){var $dayPopoverContainer=this._options.$dayPopoverContainer,$appointmentPopoverContainer=this._options.$appointmentPopoverContainer;if($dayPopoverContainer!==undefined&&$dayPopoverContainer.css("display")!=="none"){if(!$dayPopoverContainer.is(event.target)&&$dayPopoverContainer.has(event.target).length===0){this._options.$dayPopover.igPopover("hide")}}if($appointmentPopoverContainer!==undefined&&$appointmentPopoverContainer.css("display")!=="none"){if(!$appointmentPopoverContainer.is(event.target)&&$appointmentPopoverContainer.has(event.target).length===0){this._options.$appointmentPopover.igPopover("hide")}}},_onDeleteAppointmentClicked:function(event){var resourceColor=null;event.preventDefault();if(this._options.$deleteAppointmentDialog===undefined){this._renderDeleteAppointmentDialog()}this._options.$appointmentPopover.igPopover("hide");if(this._options.currentAppointment.resourceId()!==null){resourceColor=this._getResourceColorById(this._options.currentAppointment.resourceId())}this._updateDeleteAppointmenDialogTitleColor(resourceColor);this._options.$deleteAppointmentDialog.dialog("open")},_onOpenAppointmentClicked:function(event){event.preventDefault();this._options.$appointmentPopover.igPopover("hide");this._openAppointmentDialogForEditing()},_onCancelAppointmentClicked:function(event){event.preventDefault();this._options.$appointmentDialog.dialog("close")},_getAppointmentFromDialog:function(){var fromDateValue=this._options.$appointmentDialogFromDate.igDatePicker("value"),fromTimeValue=this._options.$appointmentDialogFromTime.igDateEditor("value"),toDateValue=this._options.$appointmentDialogToDate.igDatePicker("value"),toTimeValue=this._options.$appointmentDialogToTime.igDateEditor("value"),appointment,start,end,resourceId;start=new Date(fromDateValue.getFullYear(),fromDateValue.getMonth(),fromDateValue.getDate(),fromTimeValue.getHours(),fromTimeValue.getMinutes());end=new Date(toDateValue.getFullYear(),toDateValue.getMonth(),toDateValue.getDate(),toTimeValue.getHours(),toTimeValue.getMinutes());resourceId=this._options.$appointmentDialogResourceCombo.igCombo("value");appointment={subject:this._options.$appointmentDialogSubject.igTextEditor("value"),location:this._options.$appointmentDialogLocation.igTextEditor("value"),start:start,end:end,description:this._options.$appointmentDialogDescription.igTextEditor("value"),resourceId:resourceId};return appointment},_onCreateAppointmentClicked:function(event){var noCancel,appointment,result;event.preventDefault();if(!this._options.$appointmentDialog.igValidator("validate")){return}appointment=this._getAppointmentFromDialog();noCancel=this._triggerAppointmentCreating(appointment);if(noCancel){result=this.createAppointment(appointment);this._triggerAppointmentCreated(result);this._options.$appointmentDialog.dialog("close")}},_onEditAppointmentClicked:function(event){var noCancel;event.preventDefault();if(!this._options.$appointmentDialog.igValidator("validate")){return}var appointmentNewData=this._getAppointmentFromDialog();appointmentNewData.id=this._options.currentAppointment.id();noCancel=this._triggerAppointmentEditing(this._options.currentAppointment.dataObject(),appointmentNewData);if(noCancel){this.editAppointment(this._options.currentAppointment,appointmentNewData);this._triggerAppointmentEdited(this._options.currentAppointment.dataObject());this._options.currentAppointment=null;this._options.$appointmentDialog.dialog("close")}},getAppointmentById:function(id){var appointment,dataSource=this.options.dataSource,appoinments=dataSource.appointmentItemsSource(),appointmentsResult,range,translatedAppointmentObjects;appointment=appoinments.findRecordByKey(id);if(appointment==null){return null}range=new $.ig.scheduler.DateTimeRange(appointment.start,appointment.end);appointmentsResult=dataSource.getAppointmentsInRange(range);translatedAppointmentObjects=appointmentsResult.appointments();if(translatedAppointmentObjects.count()<=0){return null}for(var i=0;i<translatedAppointmentObjects.count();i++){if(translatedAppointmentObjects.item(i).id()==id){return translatedAppointmentObjects.item(i)}}return null},createAppointment:function(appointment){var dataSource,igDataSource;if(!appointment.id){appointment.id=$.ig.util.createGuid()}dataSource=this.options.dataSource;igDataSource=dataSource.appointmentItemsSource();return igDataSource.addRow(appointment.id,appointment,true)},deleteAppointment:function(appointment){var dataSource=this.options.dataSource,result;if(!appointment){return}result=dataSource.deleteAppointment(appointment);dataSource.appointmentItemsSource().deleteRow(appointment.id(),true);return result},editAppointment:function(appointment,updateAppoinment){if(!appointment){return}appointment.id(updateAppoinment.id);appointment.start(updateAppoinment.start);appointment.end(updateAppoinment.end);appointment.location(updateAppoinment.location);appointment.subject(updateAppoinment.subject);appointment.description(updateAppoinment.description);appointment.resourceId(updateAppoinment.resourceId)},_onDayPopoverCreateButtonClicked:function(){this._options.$dayPopover.igPopover("hide");this._openAppointmentDialogForCreating()},_formatDateToAMPM:function(date){var time,hours=date.getHours(),minutes=date.getMinutes(),ampm="";if(this._options.timeFormat.indexOf("tt")>=0){hours=hours%12;hours=hours?hours:12;ampm=hours>=12?" PM":" AM"}minutes=minutes<10?"0"+minutes:minutes;time=hours+":"+minutes+ampm;return time},_triggerRendering:function(){var args={owner:this,element:this.element};return this._trigger(this.events.rendering,null,args)},_triggerRendered:function(){var args={owner:this,element:this.element};this._trigger(this.events.rendered,null,args)},_triggerViewChanging:function(event,newSelectedView,currentSelectedView){var args={owner:this,element:event.target,currentSelectedView:currentSelectedView,newSelectedView:newSelectedView};return this._trigger(this.events.viewChanging,event,args)},_triggerViewChanged:function(event){var args={owner:this,element:event.target,newSelectedView:this.options.viewMode};this._trigger(this.events.viewChanged,event,args)},_triggerDaySelected:function(){var args={owner:this,element:this.element,date:this.options.selectedDate};this._trigger(this.events.daySelected,null,args)},_triggerMonthChanging:function(event,newSelectedDate){var args={owner:this,element:event.target,currentSelectedDate:this.options.selectedDate,newSelectedDate:newSelectedDate};return this._trigger(this.events.monthChanging,event,args)},_triggerMonthChanged:function(event){var args={owner:this,element:event.target,newSelectedDate:this.options.selectedDate};this._trigger(this.events.monthChanged,event,args)},_triggerAgendaRangeChanging:function(event,newAgendaRangeStartDate){var args={owner:this,element:event.target,dateRangeInterval:this.options.agendaViewSettings.dateRangeInterval,currentAgendaRangeStartDate:this.options.selectedDate,newAgendaRangeStartDate:newAgendaRangeStartDate};return this._trigger(this.events.agendaRangeChanging,event,args)},_triggerAgendaRangeChanged:function(event){var args={owner:this,element:event.target,dateRangeInterval:this.options.agendaViewSettings.dateRangeInterval,newAgendaRangeStartDate:this.options.selectedDate};this._trigger(this.events.agendaRangeChanged,event,args)},_triggerAppointmentDialogOpening:function(isAppointmentNew){var args={owner:this,element:this._options.$appointmentDialog,isAppointmentNew:isAppointmentNew};return this._trigger(this.events.appointmentDialogOpening,null,args)},_triggerAppointmentDialogOpened:function(isAppointmentNew){var args={owner:this,element:this._options.$appointmentDialog,isAppointmentNew:isAppointmentNew};this._trigger(this.events.appointmentDialogOpened,null,args)},_triggerAppointmentDialogClosing:function(isAppointmentNew){var args={owner:this,element:this._options.$appointmentDialog,isAppointmentNew:isAppointmentNew};return this._trigger(this.events.appointmentDialogClosing,null,args)},_triggerAppointmentDialogClosed:function(isAppointmentNew){var args={owner:this,element:this._options.$appointmentDialog,isAppointmentNew:isAppointmentNew};this._trigger(this.events.appointmentDialogClosed,null,args)},_triggerAppointmentCreating:function(appointment){var args={owner:this,appointment:appointment};return this._trigger(this.events.appointmentCreating,null,args)},_triggerAppointmentCreated:function(appointment){var args={owner:this,appointment:appointment};this._trigger(this.events.appointmentCreated,null,args)},_triggerAppointmentEditing:function(appointment,newAppointment){var args={owner:this,appointment:appointment,newAppointment:newAppointment};return this._trigger(this.events.appointmentEditing,null,args)},_triggerAppointmentEdited:function(appointment){var args={owner:this,appointment:appointment};this._trigger(this.events.appointmentEdited,null,args)},_triggerAppointmentDeleting:function(appointment){var args={owner:this,appointment:appointment};return this._trigger(this.events.appointmentDeleting,null,args)},_triggerAppointmentDeleted:function(appointmentId){var args={owner:this,appointmentId:appointmentId};this._trigger(this.events.appointmentDeleted,null,args)},_setOption:function(key,value){switch(key){case"viewMode":this._viewMode(value);break;case"selectedDate":this._selectDate(value);break;case"agendaViewSettings":this._setAgendaViewSettings(value);break;case"monthViewSettings":this._setMonthViewSettings(value);break;default:this._options.$scheduler.igSchedulerCore("option",key,value)}},_setAgendaViewSettings:function(settings){var date=this.options.selectedDate,newValue,name;for(name in settings){newValue=settings[name];switch(name){case"dateRangeInterval":this._options.$scheduler.igSchedulerCore("option","agendaViewMinimumDate",date);this._options.$scheduler.igSchedulerCore("option","agendaViewMaximumDate",new $.ig.Date.prototype.addDays(date,newValue));break}}},_setMonthViewSettings:function(settings){var newValue,name;for(name in settings){newValue=settings[name];switch(name){case"isHorizontalSeparatorVisibile":this._options.$scheduler.igSchedulerCore("option","monthViewHorizontalSeparatorVisibility",newValue?"visible":"collapsed");break;case"isVerticalSeparatorVisibile":this._options.$scheduler.igSchedulerCore("option","monthViewVerticalSeparatorVisibility",newValue?"visible":"collapsed");break;case"isWeekdayVisible":this._options.$scheduler.igSchedulerCore("option","monthViewDayOfWeekHeaderVisibility",newValue?"visible":"collapsed");break;case"isWeekNumberVisible":this._options.$scheduler.igSchedulerCore("option","monthViewWeekNumberVisibility",newValue?"visible":"collapsed");break;case"isPreviousMonthShown":this._options.$scheduler.igSchedulerCore("option","monthViewLeadingDayVisibility",newValue?"visible":"collapsed");break;case"isNextMonthShown":this._options.$scheduler.igSchedulerCore("option","monthViewTrailingDayVisibility",newValue?"visible":"collapsed");break}}},_saveInitialState:function(){var index,element=this.element[0],attr;if(this.element.children().length>0){this._initialDOMContent=this.element.children().clone(true);this._removeAttributes();this.element.off();this.element.empty()}this._initialAttributes=[];attr=element.attributes;for(index=0;index<attr.length;index++){if(attr[index].name!=="id"){this._initialAttributes.push({name:attr[index].name,attrValue:attr[index].value})}}},_restoreInitialSate:function(){var index;if(this._initialDOMContent){this._initialDOMContent.appendTo(this.element);delete this._initialDOMContent}if(this._initialAttributes){for(index=0;index<this._initialAttributes.length;index++){if(this._initialAttributes[index].name!=="id"){this.element.attr(this._initialAttributes[index].name,this._initialAttributes[index].attrValue)}}delete this._initialAttributes}},_removeAttributes:function(){var element=this.element,attr=element[0].attributes,concatenatedAttr="",i;for(i=0;i<attr.length;i++){if(attr[i].name!=="id"){concatenatedAttr+=attr[i].name+" "}}element.removeAttr(concatenatedAttr.trim(" "))},_destroyDayPopover:function(){if(this._options.$dayPopover===undefined){return}this._options.$dayPopoverCreateButton.igButton("destroy");this._options.$dayPopover.igPopover("destroy")},_destroyAppointmentPopover:function(){if(this._options.$appointmentPopover===undefined){return}this._options.$appointmentPopoverDeleteButton.igButton("destroy");this._options.$appointmentPopoverOpenButton.igButton("destroy");this._options.$appointmentPopover.igPopover("destroy")},_destroyDeleteAppointmentDialog:function(){if(this._options.$deleteAppointmentDialog===undefined){return}this._options.$deleteAppointmentDialogCancelButton.igButton("destroy");this._options.$deleteAppointmentDialogDeleteButton.igButton("destroy");this._options.$deleteAppointmentDialog.dialog("destroy")},_destroyAppointmentDialog:function(){if(this._options.$appointmentDialog===undefined){return}this._options.$appointmentDialogSubject.igTextEditor("destroy");this._options.$appointmentDialogLocation.igTextEditor("destroy");this._options.$appointmentDialogFromDate.igDatePicker("destroy");this._options.$appointmentDialogFromTime.igDateEditor("destroy");this._options.$appointmentDialogToDate.igDatePicker("destroy");this._options.$appointmentDialogToTime.igDateEditor("destroy");this._options.$appointmentDialogDescription.igTextEditor("destroy");this._options.$appointmentDialogCreateButton.igButton("destroy");this._options.$appointmentDialogSaveButton.igButton("destroy");this._options.$appointmentDialogCancelButton.igButton("destroy");this._options.$appointmentDialog.dialog("destroy");this._options.$appointmentDialogResourceCombo.igCombo("destroy");this._options.$appointmentDialog.igValidator("destroy")},_storeResourcesColorsById:function(){var resources=this.options.dataSource.getResources(),resourcesEnumerator=resources.getEnumerator(),resource;while(resourcesEnumerator.moveNext()){resource=resourcesEnumerator.current();this._options.resoucesById[resource.id()]={color:this.options.dataSource.getAppointmentBackgroundColor(resource),displayName:resource.displayName()}}},_getResourceColorById:function(id){var resource=this._options.resoucesById[id];if(!resource){return""}return resource.color},destroy:function(){this._detachHeaderEventHandlers();this._detachSchedulerEventHandlers();this._detachDocumentEventHandlers();this._removeAttributes();this._options.$calendar.datepicker("destroy");this._destroyDayPopover();this._destroyAppointmentPopover();this._destroyDeleteAppointmentDialog();this._destroyAppointmentDialog();this._options.$scheduler.igSchedulerCore("destroy");this.element.empty();delete this._options;$.Widget.prototype.destroy.apply(this,arguments);this._restoreInitialSate();return this},todayButton:function(){return this._options.$todayButton},previousButton:function(){return this._options.$previousButton},dateRangeButton:function(){return this._options.$dateRangeButton},nextButton:function(){return this._options.$nextButton},getCalendar:function(){return this._options.$calendar}});$.extend($.ui.igScheduler,{version:"17.1.20171.1019"});return $.ui.igScheduler});